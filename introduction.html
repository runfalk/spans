
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>Introduction &#8212; Spans  documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Ranges" href="ranges.html" />
    <link rel="prev" title="Spans documentation" href="index.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="introduction">
<h1>Introduction<a class="headerlink" href="#introduction" title="Permalink to this heading">¶</a></h1>
<p>For a recent project of mine I started using PostgreSQL’s <code class="docutils literal notranslate"><span class="pre">tsrange</span></code> type and needed an equivalent in Python. These range types attempt to mimick PostgreSQL’s behavior in every way. To make ranges more useful some extra methods have been added that are not available in PostgreSQL.</p>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading">¶</a></h2>
<p>Spans have no requirements but the standard library. It is known to work on the following Python versions</p>
<ul class="simple">
<li><p>Python 2.7</p></li>
<li><p>Python 3.3</p></li>
<li><p>Python 3.4</p></li>
<li><p>Python 3.5</p></li>
<li><p>Python 3.6</p></li>
<li><p>PyPy</p></li>
<li><p>PyPy3</p></li>
</ul>
<p>It may work on other version as well.</p>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">¶</a></h2>
<p>Spans is available from <a class="reference external" href="https://pypi.python.org/pypi/Spans/">PyPI</a>.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ pip install spans
</pre></div>
</div>
</section>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Permalink to this heading">¶</a></h2>
<p>If you are making a booking application for a bed and breakfast hotel and want
to ensure no room gets double booked:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span> <span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">defaultdict</span>
<span class="linenos"> 2</span> <span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">date</span>
<span class="linenos"> 3</span> <span class="kn">from</span> <span class="nn">spans</span> <span class="kn">import</span> <span class="n">daterange</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span> <span class="c1"># Add a booking from 2013-01-14 through 2013-01-15</span>
<span class="linenos"> 6</span> <span class="n">bookings</span> <span class="o">=</span> <span class="n">defaultdict</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="p">{</span>
<span class="linenos"> 7</span>     <span class="mi">1</span> <span class="p">:</span> <span class="p">[</span><span class="n">daterange</span><span class="p">(</span><span class="n">date</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span> <span class="n">date</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">16</span><span class="p">))]</span>
<span class="linenos"> 8</span> <span class="p">}</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span> <span class="k">def</span> <span class="nf">is_valid_booking</span><span class="p">(</span><span class="n">bookings</span><span class="p">,</span> <span class="n">room</span><span class="p">,</span> <span class="n">new_booking</span><span class="p">):</span>
<span class="linenos">11</span>     <span class="k">return</span> <span class="ow">not</span> <span class="nb">any</span><span class="p">(</span><span class="n">booking</span><span class="o">.</span><span class="n">overlap</span><span class="p">(</span><span class="n">new_booking</span> <span class="k">for</span> <span class="n">booking</span> <span class="ow">in</span> <span class="n">bookings</span><span class="p">[</span><span class="n">room</span><span class="p">])</span>
<span class="linenos">12</span>
<span class="linenos">13</span> <span class="nb">print</span> <span class="n">is_valid_booking</span><span class="p">(</span>
<span class="linenos">14</span>     <span class="n">bookings</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">daterange</span><span class="p">(</span><span class="n">date</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">14</span><span class="p">),</span> <span class="n">date</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">18</span><span class="p">)))</span> <span class="c1"># False</span>
<span class="linenos">15</span> <span class="nb">print</span> <span class="n">is_valid_booking</span><span class="p">(</span>
<span class="linenos">16</span>     <span class="n">bookings</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">daterange</span><span class="p">(</span><span class="n">date</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">16</span><span class="p">),</span> <span class="n">date</span><span class="p">(</span><span class="mi">2013</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">18</span><span class="p">)))</span> <span class="c1"># True</span>
</pre></div>
</div>
</section>
<section id="using-with-psycopg">
<h2>Using with Psycopg<a class="headerlink" href="#using-with-psycopg" title="Permalink to this heading">¶</a></h2>
<p>To use Spans with <a class="reference external" href="http://initd.org/psycopg/">Psycopg</a> the <a class="reference external" href="https://github.com/runfalk/psycospans">Psycospans</a> project exists.</p>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Spans</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Spans  documentation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example">Example</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-with-psycopg">Using with Psycopg</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ranges.html">Ranges</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom_types.html">Custom range types</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes.html">Recipes</a></li>
<li class="toctree-l1"><a class="reference internal" href="postgresql.html">PostgreSQL analogies</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="index.html" title="previous chapter">Spans  documentation</a></li>
      <li>Next: <a href="ranges.html" title="next chapter">Ranges</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2022, Andreas Runfalk.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 5.0.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/introduction.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>